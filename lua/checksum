-- checksum_debug.lua
-- Prints debug info to the in-game chat window

local hasChecked = false
local timePassed = 0

function script.update(dt)
    -- Wait 3 seconds after loading to ensure chat is visible
    timePassed = timePassed + dt
    
    if timePassed > 3 and not hasChecked then
        hasChecked = true
        
        ac.sendChatMessage("--- [DEBUG] SCRIPT STARTED ---")
        
        -- 1. Identify the Car
        local carModel = ac.getCarName(0)
        ac.sendChatMessage("Detected Car: " .. tostring(carModel))
        
        -- 2. Check for the File
        local filePath = "content/cars/" .. carModel .. "/data.acd"
        local file = io.open(filePath, "rb")
        
        if file then
            -- Get file size to prove we read it
            local size = file:seek("end")
            file:close()
            ac.sendChatMessage("‚úÖ SUCCESS: data.acd found!")
            ac.sendChatMessage("üìÇ File Size: " .. size .. " bytes")
        else
            ac.sendChatMessage("‚ùå FAILURE: data.acd NOT found or Locked.")
            ac.sendChatMessage("‚ö†Ô∏è Path checked: " .. filePath)
        end
        
        ac.sendChatMessage("--- [DEBUG] SCRIPT FINISHED ---")
    end
end
